#### 集合

##### 什么是集合

集合是存储各种数据类型的一个容器

（1）是一个容器

（2）一般放同种数据类型

（3）一般存放多个对象

##### 集合

不可变集合：不可修改，但是可以模拟修改和扩充

可变集合：可修改，可以更新和扩充

三大类：

array set list map



##### 定长数组

```
scala> val arr = Array(1,2,3)
arr: Array[Int] = Array(1, 2, 3)

scala> val arr1 = Array[Int](1,2,3)
arr1: Array[Int] = Array(1, 2, 3)

scala> val arr2 = new Array[Int](10)
arr2: Array[Int] = Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
scala> arr(1)
res53: Int = 2

scala> arr1.length
res55: Int = 3

scala> arr(0) = 7
scala> arr.sum
res67: Int = 12

scala> arr.max
res68: Int = 7

scala> arr.min
res69: Int = 2
scala> arr.sorted
res72: Array[Int] = Array(2, 3, 7)
scala> arr.sorted.reverse
res75: Array[Int] = Array(7, 3, 2)

```

可变长数组

数组添加元素

```
scala> import scala.collection.mutable.ArrayBuffer
import scala.collection.mutable.ArrayBuffer

scala> var arr1 = ArrayBuffer("a","b")
arr1: scala.collection.mutable.ArrayBuffer[String] = ArrayBuffer(a, b)

scala> var arr1 = ArrayBuffer[String]("a","b")
arr1: scala.collection.mutable.ArrayBuffer[String] = ArrayBuffer(a, b)

scala> var arr2 = new ArrayBuffer[Int](10)
arr2: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer()

scala> arr2.length
res76: Int = 0

scala> var arr2 = new ArrayBuffer[Int]()
arr2: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer()

scala> arr2.length
res77: Int = 0
scala> arr2 += 3
res83: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3)

scala> arr2(1)
res84: Int = 3

scala> arr2.length
res85: Int = 2

scala> arr2 += (7,8)
            ^
       warning: method += in trait Growable is deprecated (since 2.13.0): Use `++=` (addAll) instead of varargs `+=`
res86: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 7, 8)

scala> arr2
res87: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 7, 8)

scala> arr2(3)
res88: Int = 8

scala> arr2 += (4)
res92: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 7, 8, 4)

scala> arr2 += (4,5)
            ^
       warning: method += in trait Growable is deprecated (since 2.13.0): Use `++=` (addAll) instead of varargs `+=`
res93: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 7, 8, 4, 4, 5)


scala> arr2 ++= Array(4,5)
res95: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 7, 8, 4, 4, 5, 4, 5)

scala> arr2 ++= Array(4,5)
res97: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 7, 8, 4, 4, 5, 4, 5, 4, 5)

scala> arr2.length
res98: Int = 11

scala> arr2.append(8)
res99: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 7, 8, 4, 4, 5, 4, 5, 4, 5, 8)


scala> arr2.insert(2,88)

scala> arr2
res104: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 88, 7, 8, 4, 4, 5, 4, 5, 4, 5, 8)

scala> arr2.insertAll(2,Array(88,99))

scala> arr2.append(3,3,3,3)
            ^
       warning: method append in trait Buffer is deprecated (since 2.13.0): Use appendAll instead
res112: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 88, 99, 88, 7, 8, 4, 4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3)


scala> arr2.appendAll(Array(3,3,3,3))
res114: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 88, 99, 88, 7, 8, 4, 4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3, 3, 3, 3, 3)

scala> arr2.append(3,3,3,3)
            ^
       warning: method append in trait Buffer is deprecated (since 2.13.0): Use appendAll instead
res116: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(1, 3, 88, 99, 88, 7, 8, 4, 4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3)

```

数组删除元素

```
scala> arr2.trimStart(3)

scala> arr2
res124: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(88, 7, 8, 4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3, 3, 3, 3, 3, 3)

scala> arr2.trimEnd(5)

scala> arr2
res126: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(88, 7, 8, 4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3)

scala> arr2.trimStart(3)

scala> arr2
res128: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3)

scala> arr2.remove(2,2)//第一个参数是索引，第二个参数是要删除的个数

scala> arr2
res130: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(4, 5, 4, 5, 8, 3, 3, 3, 3)

scala> arr2 -= 1
res117: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(3, 88, 99, 88, 7, 8, 4, 4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3)

scala> arr2 -= 4
res118: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(3, 88, 99, 88, 7, 8, 4, 5, 4, 5, 4, 5, 8, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3)


```

数组运算

```
scala> var a = Array(1,2,3,4,5)
a: Array[Int] = Array(1, 2, 3, 4, 5)

scala> for(e <- a) yield e*10
res137: Array[Int] = Array(10, 20, 30, 40, 50)

scala> a.map(_*10)
res138: Array[Int] = Array(10, 20, 30, 40, 50)

scala> a.filter(_%2 == 0)
res139: Array[Int] = Array(2, 4)

scala> a.map(x => x*10)
res140: Array[Int] = Array(10, 20, 30, 40, 50)
```

#### List

不可变长数组

```
scala> var list = List(1,2,3)
list: List[Int] = List(1, 2, 3)
scala> var list1 = 0 :: list
list1: List[Int] = List(0, 1, 2, 3)

scala> list1
res144: List[Int] = List(0, 1, 2, 3)

scala> println(list1.getClass.getName)
scala.collection.immutable.$colon$colon // immutable不可变

scala> list.::(0)
res146: List[Int] = List(0, 1, 2, 3) //在list前加元素

scala> list :+ 4
res147: List[Int] = List(1, 2, 3, 4) //在list后边加元素

scala> 0 +: list
res148: List[Int] = List(0, 1, 2, 3) //在list前加元素
scala> list ++: list1
res149: List[Int] = List(1, 2, 3, 0, 1, 2, 3)
```

可变长数组

```
scala> import scala.collection.mutable.ListBuffer
import scala.collection.mutable.ListBuffer

scala> var list3 = ListBuffer(1,2,3)
list3: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1, 2, 3)
scala> var list4 = new ListBuffer[Int]()
list4: scala.collection.mutable.ListBuffer[Int] = ListBuffer()

scala> lsit4.append(9)
       ^
       error: not found: value lsit4

scala> list4.append(9)
res151: scala.collection.mutable.ListBuffer[Int] = ListBuffer(9)

scala> list3 ++ list4
res152: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1, 2, 3, 9)

scala> list3 ++= list4
res153: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1, 2, 3, 9)

scala> list3
res154: scala.collection.mutable.ListBuffer[Int] = ListBuffer(1, 2, 3, 9)
scala> list3.map(_*10)
res157: scala.collection.mutable.ListBuffer[Int] = ListBuffer(10, 20, 30, 90)

scala> list.map{println("hello");_*10)
                                     ^
       error: ';' expected but ')' found.

scala> list.map{println("hello");_*10}
hello
res158: List[Int] = List(10, 20, 30)

scala> list.map{e=>println("Helo");e*10}
Helo
Helo
Helo
res159: List[Int] = List(10, 20, 30)
```



##### map

创建map

```
//不可变长map
scala> Map("zhangsan"->90,"list"->80)
res0: scala.collection.immutable.Map[String,Int] = Map(zhangsan -> 90, list -> 80)

scala> val score = Map("zhangsan"->90,"list"->80)
score: scala.collection.immutable.Map[String,Int] = Map(zhangsan -> 90, list -> 80)

scala> val score = Map(("zhangsan",90),("lisi",80))
score: scala.collection.immutable.Map[String,Int] = Map(zhangsan -> 90, lisi -> 80)

//可变长map
scala> import scala.collection.mutable.Map
import scala.collection.mutable.Map

scala> val score = Map("zhangsan"->90,"lisi"->80)
score: scala.collection.mutable.Map[String,Int] = HashMap(zhangsan -> 90, lisi -> 80)

scala> score("zhangsan")
res3: Int = 90

scala> score("lisi")
res4: Int = 80

scala> if(score.contains("zhang")) score("zhang") else -1
res6: Int = -1

scala> score.getOrElse("zhangsan",-1)
res7: Int = 90

```

##### map操作

```
scala> score("zhangsan") = 60

scala> score("li") = 70
scala> score
res11: scala.collection.mutable.Map[String,Int] = HashMap(zhangsan -> 60, lisi -> 80, li -> 70)
scala> score += ("zhaowu"->100)
res13: score.type = HashMap(zhangsan -> 60, lisi -> 80, zhaowu -> 100, li -> 70)

scala> score += (("hu",90))
res21: score.type = HashMap(zhangsan -> 60, lisi -> 80, zhaowu -> 100, hu -> 90, li -> 70)

scala> score -= "hu"
res22: score.type = HashMap(zhangsan -> 60, lisi -> 80, zhaowu -> 100, li -> 70)
scala> for((k,v) <- score) println(k + ":v")
zhangsan:v
lisi:v
zhaowu:v
li:v


```



##### 元组

元组中的元素不可改变

```
//元组定义1
al t2 = ("java","scala",1)
t2: (String, String, Int) = (java,scala,1)

scala> t2._1
res25: String = java

//元组定义2
scala> val t4,(a,b,c) = ("qianfeng","edu",1)
t4: (String, String, Int) = (qianfeng,edu,1)
a: String = qianfeng
b: String = edu
c: Int = 1

scala> a
res31: String = qianfeng

scala> b
res32: String = edu

//元组定义3

scala> val t5 = new Tuple3("qianfeng","edu",1)
t5: (String, String, Int) = (qianfeng,edu,1)

scala> t5._3
res34: Int = 1

scala> t5.productIterator.foreach(println(_))//遍历元组
qianfeng
edu
1
2
3


```



##### 拉链操作 zip

zip方法可以将两个数组的元素合并，如果一个数组元素个数大于另一个数组，则会舍去多出来的元素

zipAll方法用于将两个大小不一的数组进行合并，arr.zipAll(arr2,x,y),指定x，y用于填充

unzip用于解除合并数组

```
scala> val al = Array("java","scala","python")
al: Array[String] = Array(java, scala, python)

scala> val a2 = Array(1,2,3)
a2: Array[Int] = Array(1, 2, 3)

scala> al.zip(a2)
res42: Array[(String, Int)] = Array((java,1), (scala,2), (python,3))

scala> val a3 = Array(4,4,56,6)
a3: Array[Int] = Array(4, 4, 56, 6)

scala> al.zip(a3)
res43: Array[(String, Int)] = Array((java,4), (scala,4), (python,56))


scala> val x = "a"
x: String = a

scala> val y = 0
y: Int = 0

scala> al.zipAll(a3,x,y)
res45: Array[(String, Int)] = Array((java,4), (scala,4), (python,56), (a,6))

scala> val res= al.zipAll(a3,x,y)
res: Array[(String, Int)] = Array((java,4), (scala,4), (python,56), (a,6))

scala> res.unzip
res46: (Array[String], Array[Int]) = (Array(java, scala, python, a),Array(4, 4, 56, 6))
```



##### set

特点：

set中元素不允许重复

set中的元素是无序随机的

```
//不可变长数组
scala> val set1 = Set(1,2,3)
set1: scala.collection.immutable.Set[Int] = Set(1, 2, 3)

scala> set1 + 4
res52: scala.collection.immutable.Set[Int] = Set(1, 2, 3, 4)

scala> set1
res53: scala.collection.immutable.Set[Int] = Set(1, 2, 3)

scala> set1 -3
res54: scala.collection.immutable.Set[Int] = Set(1, 2)

//可变长集合
scala> import scala.collection.mutable.Set
import scala.collection.mutable.Set

scala> val set2 = Set(1,2,3)
set2: scala.collection.mutable.Set[Int] = HashSet(1, 2, 3)

scala> set2 += 4
res56: set2.type = HashSet(1, 2, 3, 4)

scala> set2
res57: scala.collection.mutable.Set[Int] = HashSet(1, 2, 3, 4)

scala> set2 += 5
res62: set2.type = HashSet(1, 2, 3, 4, 5)

scala> set2 -= 3
res63: set2.type = HashSet(1, 2, 4, 5)

scala> set2 += 2
res64: set2.type = HashSet(1, 2, 4, 5)

scala> set2.head//返回集合头元素
res65: Int = 1

scala> set2.tail  //返回集合中除头元素之外的元素
res67: scala.collection.mutable.Set[Int] = HashSet(2, 4, 5)

scala> set2.isEmpty
res71: Boolean = false

scala> set2.min
res73: Int = 1

scala> set2.max
res74: Int = 5

scala> val set3 = Set(3,4,5,6)
set3: scala.collection.mutable.Set[Int] = HashSet(3, 4, 5, 6)

scala> set2 ++ set3
res75: scala.collection.mutable.Set[Int] = HashSet(1, 2, 3, 4, 5, 6)

scala> set2
res76: scala.collection.mutable.Set[Int] = HashSet(1, 2, 4, 5)

scala> set2.intersect(set3)
res77: scala.collection.mutable.Set[Int] = HashSet(4, 5)
```



##### 集合函数

max,min,sum

```
scala> val list = List(2,3,4,5)
list: List[Int] = List(2, 3, 4, 5)

scala> list.min
res79: Int = 2

scala> list.max
res81: Int = 5

scala> list.sum
res82: Int = 14

```

filter

```
list.filter(e=>e%2==0)
res83: List[Int] = List(2, 4)
```

flatten  

对包含集合的集合进行处理，将集合中的集合的元素拿出放在最外面的集合中

```
scala> var list1 = List(5,6,7)
list1: List[Int] = List(5, 6, 7)

scala> val list3 = List(list,list1)
list3: List[List[Int]] = List(List(2, 3, 4, 5), List(5, 6, 7))

scala> list3.flatten
res85: List[Int] = List(2, 3, 4, 5, 5, 6, 7)
```

map,flatMap

```
scala> list.map(e=>e*10)
res86: List[Int] = List(20, 30, 40, 50)

scala> list
res87: List[Int] = List(2, 3, 4, 5)

scala> var list4 = List('a','b','c')
list4: List[Char] = List(a, b, c)

scala> val list5 = list4.map(ch=>List(ch,ch.toUpper))
list5: List[List[Char]] = List(List(a, A), List(b, B), List(c, C))

scala> list5.flatten
res88: List[Char] = List(a, A, b, B, c, C)

scala> val list6 = list4.flatMap(ch=>List(ch,ch.toUpper))
list6: List[Char] = List(a, A, b, B, c, C)
```

foreach,forall

```
scala> list.forall(e=>e>0)
res89: Boolean = true

scala> list.foreach(println)
2
3
4
5
```

reduceLeft(),reduceRight(),从左或从右对集合进行运算

flodLeft(x)将x放在集合最左边，然后依次相加

```
scala> list
res92: List[Int] = List(2, 3, 4, 5)

scala> list.reduceLeft(_+_)//从边第一个元素开始相加
res93: Int = 14

scala> list.sum
res94: Int = 14

scala> list.reduceLeft(_-_)//从左边第一个元素开始相减
res95: Int = -10

scala> list.reduceRight(_-_)
res96: Int = -2

scala> list.foldLeft(0)(_+_)//将0放在最左边开始相加
res97: Int = 14

scala> list.foldLeft(10)(_+_)
res98: Int = 24
```

